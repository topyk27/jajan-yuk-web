import{a as H,b as d,e as p,g as _,h as Y}from"./chunk-CWSOCGWF.js";import{A as l,B as w,F as O,G as f,K as T,L as k,M as P,N as S,O as n,P as o,Q as m,T as E,U as x,V as h,W as z,X as N,Y as Q,Z as c,_ as v,e as C,g as F,ha as $,l as R,la as G,m as j,na as V,o as I,oa as B,p as M,s as y,t as b,u as A,v as U,z as g}from"./chunk-7A7GJFHA.js";function J(i,e,a){var t=i.filter(function(r){return!e.find(function(s){return r[a]===s[a]})});return t.concat(e)}var D=(()=>{let e=class e{constructor(){this.getAllPosts=()=>C(this,null,function*(){try{return(yield _.listDocuments(p.databaseId,p.postCollectionId,[d.orderDesc("$createdAt")])).documents}catch(t){if(console.error(t),t instanceof Error)throw new Error(t.message)}}),this.getAllPostPerPage=(t,r)=>C(this,null,function*(){try{return(yield _.listDocuments(p.databaseId,p.postCollectionId,[d.orderDesc("$createdAt"),d.limit(r),d.offset(t)])).documents}catch(s){if(console.error(s),s instanceof Error)throw new Error(s.message)}}),this.getMostViewPosts=()=>C(this,null,function*(){try{return(yield _.listDocuments(p.databaseId,p.postCollectionId,[d.orderDesc("view"),d.limit(7)])).documents}catch(t){if(console.error(t),t instanceof Error)throw new Error(t.message)}}),this.searchPosts=t=>C(this,null,function*(){try{let r=yield _.listDocuments(p.databaseId,p.postCollectionId,[d.search("title",t),d.orderAsc("title")]),s=yield _.listDocuments(p.databaseId,p.postCollectionId,[d.search("detail",t),d.orderAsc("title")]);return J(r.documents,s.documents)}catch(r){if(console.error(r),r instanceof Error)throw new Error(r.message)}})}search(t){return F(this.searchPosts(t))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var re=["postList"];function ie(i,e){if(i&1&&(n(0,"div",12),m(1,"img",14),o()),i&2){let a=e.$implicit;l(),f("src",a.image,g)}}function ne(i,e){if(i&1&&(n(0,"div",16)(1,"div",24)(2,"div",25)(3,"div",26)(4,"div",27),m(5,"img",28),o()(),n(6,"div",29)(7,"p",30),c(8),o(),n(9,"p",31),c(10),o()()()(),n(11,"div",32),m(12,"img",33),o()()),i&2){let a=e.$implicit;l(5),f("src",a.creator.avatar,g),l(3),v(a.title),l(2),v(a.creator.username),l(2),f("src",a.image,g)}}function oe(i,e){if(i&1){let a=E();n(0,"div",15,0),P(2,ne,13,4,"div",16,k),o(),n(4,"div",17)(5,"a",18),x("click",function(){y(a);let r=h();return b(r.prev())}),A(),n(6,"svg",19),m(7,"path",20),o(),c(8," Previous "),o(),U(),n(9,"a",21),x("click",function(){y(a);let r=h();return b(r.next())}),c(10," Next "),A(),n(11,"svg",22),m(12,"path",23),o()()()}if(i&2){let a=h();l(2),S(a.allPosts)}}function se(i,e){if(i&1){let a=E();n(0,"div",13),m(1,"img",34),n(2,"p",35),c(3,"Belum ada yang posting"),o(),n(4,"p",3),c(5,"Atau mau kamu yang buat"),o(),n(6,"app-custom-button",36),x("handlePress",function(){y(a);let r=h();return b(r.buat())}),o()()}}var W=(()=>{let e=class e{constructor(t,r){this.svcPost=t,this.router=r,this.allPosts=[],this.trendingPosts=[],this.postOffset=0,this.postLimit=6}ngOnInit(){this.svcPost.getMostViewPosts().then(t=>{this.trendingPosts=t}),this.listPost(!0,!0)}listPost(t,r){let s=this.postOffset;t?r||(s+=this.postLimit):s-=this.postLimit,this.svcPost.getAllPostPerPage(s,this.postLimit).then(u=>{u.length>0?(this.allPosts=u,this.postOffset=s,this.postListEl&&this.postListEl.nativeElement.scrollIntoView({behavior:"smooth",block:"start"})):alert("Sudah diujung kak")})}search(t){if(!t.target.value.trim())return alert("Cari apa cokk");this.router.navigate(["main/search",t.target.value.trim()])}next(){this.listPost(!0)}prev(){this.postOffset>0?this.listPost(!1):alert("Sudah diujung kak")}buat(){console.log("buat klik")}};e.\u0275fac=function(r){return new(r||e)(w(D),w(V))},e.\u0275cmp=I({type:e,selectors:[["app-home"]],viewQuery:function(r,s){if(r&1&&z(re,5),r&2){let u;N(u=Q())&&(s.postListEl=u.first)}},decls:19,vars:1,consts:[["postList",""],[1,"flex","flex-col","items-center","my-6","px-4","pb-12","space-y-6"],[1,"justify-between","items-start","flex","flex-row","mb-6","w-full"],[1,"font-pmedium","text-sm","text-gray-100"],[1,"text-2xl","font-psemibold","text-white"],[1,"mt-1.5"],["src","../assets/icons/burger.png",1,"w-9","h-10","object-contain"],[1,"w-full","h-16","bg-black-100","rounded-2xl","focus:border-secondary","items-center","flex-row"],["type","text","placeholder","Cari makanan",1,"text-base","text-white","w-full","font-pregular","rounded-2xl","h-16","px-4","bg-transparent","border-none",3,"keydown.enter"],[1,"w-full","flex-1","pt-5","pb-8"],[1,"text-gray-500","text-lg","font-pregular"],[1,"carousel","carousel-center","bg-neutral","rounded-[35px]","space-x-4","p-4"],[1,"carousel-item"],[1,"flex","flex-col","justify-center","items-center","px-4","pb-20"],[1,"rounded-[35px]","w-52","h-72","md:w-80","md:h-96","my-5","overflow-hidden","shadow-lg","shadow-black/40","object-cover",3,"src"],[1,"w-full","grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"flex","flex-col","md:flex-row","flex-wrap","items-center","px-4","mb-14"],[1,"flex","pb-20"],[1,"cursor-pointer","flex","items-center","justify-center","px-4","h-10","me-3","text-base","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 10",1,"w-3.5","h-3.5","me-2","rtl:rotate-180"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 5H1m0 0 4 4M1 5l4-4"],[1,"cursor-pointer","flex","items-center","justify-center","px-4","h-10","text-base","font-medium","text-gray-500","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 10",1,"w-3.5","h-3.5","ms-2","rtl:rotate-180"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M1 5h12m0 0L9 1m4 4L9 9"],[1,"w-full","flex","flex-row","gap-3","items-start"],[1,"justify-center","items-center","flex","flex-row","flex-1"],[1,"w-[46px]","h-[46px]","rounded-lg","border","border-secondary-100","justify-center","items-center","p-0.5"],[1,"w-full","relative","justify-center","items-center"],[1,"w-[46px]","h-[46px]","rounded-lg","object-cover",3,"src"],[1,"justify-center","flex","flex-col","flex-1","ml-3","gap-y-1"],[1,"text-white","font-psemibold","text-sm","text-wrap"],[1,"text-xs","text-gray-100","font-pregular","text-wrap"],[1,"w-full","h-60","md:h-96","rounded-xl","mt-3","relative","justify-center","items-center"],[1,"w-full","h-full","rounded-xl","mt-3","object-cover",3,"src"],["src","../assets/images/empty.png",1,"w-[270px]","h-[215px]","object-contain"],[1,"text-2xl","font-psemibold","text-white","mt-2"],["title","Yuk","containerStyles","w-full my-5",3,"handlePress"]],template:function(r,s){r&1&&(n(0,"div",1)(1,"div",2)(2,"div")(3,"p",3),c(4,"Mau makan apa hari ini kak"),o(),n(5,"p",4),c(6,"USERNAME"),o()(),n(7,"div",5),m(8,"img",6),o()(),n(9,"div",7)(10,"input",8),x("keydown.enter",function(q){return s.search(q)}),o()(),n(11,"div",9)(12,"p",10),c(13,"Trending Posts"),o(),n(14,"div",11),P(15,ie,2,1,"div",12,k),o()(),O(17,oe,13,0)(18,se,7,0,"div",13),o()),r&2&&(l(15),S(s.trendingPosts),l(2),T(s.allPosts.length>0?17:18))},dependencies:[H],styles:[".carousel[_ngcontent-%COMP%]{display:inline-flex;overflow-x:scroll;scroll-snap-type:x mandatory;scroll-behavior:smooth;-ms-overflow-style:none;scrollbar-width:none}.carousel[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.carousel-item[_ngcontent-%COMP%]{box-sizing:content-box;display:flex;flex:none;scroll-snap-align:start}.carousel-start[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]{scroll-snap-align:start}.carousel-center[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]{scroll-snap-align:center}.carousel-end[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]{scroll-snap-align:end}.carousel-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover, .carousel-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:active{scale:1.2}"]});let i=e;return i})();function ae(i,e){if(i&1&&(n(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11),m(5,"img",12),o()(),n(6,"div",13)(7,"p",14),c(8),o(),n(9,"p",15),c(10),o()()()(),n(11,"div",16),m(12,"img",17),o()()),i&2){let a=e.$implicit;l(5),f("src",a.creator.avatar,g),l(3),v(a.title),l(2),v(a.creator.username),l(2),f("src",a.image,g)}}function le(i,e){if(i&1&&(n(0,"div",5),P(1,ae,13,4,"div",7,k),o()),i&2){let a=h();l(),S(a.post)}}function ce(i,e){if(i&1){let a=E();n(0,"div",6),m(1,"img",18),n(2,"p",19),c(3,"Belum ada yang posting"),o(),n(4,"p",1),c(5,"Atau mau kamu yang buat"),o(),n(6,"app-custom-button",20),x("handlePress",function(){y(a);let r=h();return b(r.buat())}),o()()}}var X=(()=>{let e=class e{constructor(t,r,s){this.svcPost=t,this.router=r,this.route=s,this.post=[]}ngOnInit(){this.query=this.route.snapshot.paramMap.get("query"),this.result()}result(){this.svcPost.searchPosts(this.query).then(t=>{this.post=t,console.log(t)},t=>{console.error(t),alert("Oops, ada masalah dikit kak")})}search(t){let r=t.target.value.trim();if(!r)return alert("Cari apa cokk");r!==this.query&&(this.query=r,this.result())}buat(){}};e.\u0275fac=function(r){return new(r||e)(w(D),w(V),w(G))},e.\u0275cmp=I({type:e,selectors:[["app-search"]],decls:9,vars:3,consts:[[1,"flex","flex-col","my-6","px-4","pb-20"],[1,"font-pmedium","text-sm","text-gray-100"],[1,"text-2xl","font-psemibold","text-white"],[1,"w-full","h-16","bg-black-100","rounded-2xl","focus:border-secondary","items-center","flex-row","mt-6","mb-8"],["type","text","placeholder","Cari makanan",1,"text-base","text-white","w-full","font-pregular","rounded-2xl","h-16","px-4","bg-transparent","border-none",3,"keydown.enter","value"],[1,"w-full","grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"flex","flex-col","justify-center","items-center","px-4"],[1,"flex","flex-col","md:flex-row","flex-wrap","items-center","px-4","mb-14"],[1,"w-full","flex","flex-row","gap-3","items-start"],[1,"justify-center","items-center","flex","flex-row","flex-1"],[1,"w-[46px]","h-[46px]","rounded-lg","border","border-secondary-100","justify-center","items-center","p-0.5"],[1,"w-full","relative","justify-center","items-center"],[1,"w-[46px]","h-[46px]","rounded-lg","object-cover",3,"src"],[1,"justify-center","flex","flex-col","flex-1","ml-3","gap-y-1"],[1,"text-white","font-psemibold","text-sm","text-wrap"],[1,"text-xs","text-gray-100","font-pregular","text-wrap"],[1,"w-full","h-60","md:h-96","rounded-xl","mt-3","relative","justify-center","items-center"],[1,"w-full","h-full","rounded-xl","mt-3","object-cover",3,"src"],["src","../assets/images/empty.png",1,"w-[270px]","h-[215px]","object-contain"],[1,"text-2xl","font-psemibold","text-white","mt-2"],["title","Yuk","containerStyles","w-full my-5",3,"handlePress"]],template:function(r,s){r&1&&(n(0,"div",0)(1,"p",1),c(2,"Search Results"),o(),n(3,"p",2),c(4),o(),n(5,"div",3)(6,"input",4),x("keydown.enter",function(q){return s.search(q)}),o()(),O(7,le,3,0,"div",5)(8,ce,7,0,"div",6),o()),r&2&&(l(4),v(s.query),l(2),f("value",s.query),l(),T(s.post.length>0?7:8))},dependencies:[H]});let i=e;return i})();var Z=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=M({type:e}),e.\u0275inj=j({imports:[B.forChild([{path:"",component:W},{path:"search/:query",component:X}]),B]});let i=e;return i})();var Ie=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=M({type:e}),e.\u0275inj=j({imports:[$,Z,Y]});let i=e;return i})();export{Ie as MainModule};
